<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>14.6. Exercises: Unit Testing &#8212; Introduction to Professional Web Development in JavaScript  documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/site.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="14.7. Studio: Unit Testing" href="studio.html" />
    <link rel="prev" title="14.5. TDD in Action" href="tdd-example.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body class="body-bc">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
        </a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<ol class="breadcrumb container">
    <li><a href="../../index.html">Contents</a></li>
    <li><a href="index.html">14. Unit Testing</a></li>
    <li class="active">14.6. Exercises: Unit Testing</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content ">

    
  <div class="section" id="exercises-unit-testing">
<h1>14.6. Exercises: Unit Testing<a class="headerlink" href="#exercises-unit-testing" title="Permalink to this headline">¶</a></h1>
<p>In many of your previous coding tasks, you had to verify that your code
worked before moving to the next step. This often required you to add
<code class="docutils literal notranslate"><span class="pre">console.log</span></code> statements to your code to check the value stored in a variable
or returned from a function. This approach finds and fixes syntax, reference,
or logic errors AFTER you write your code.</p>
<p>In this chapter, you learned how to use unit testing to solve coding errors.
Even better, you learned how to PREVENT mistakes by writing test cases before
completing the code. The exercises below offer practice with using tests to
find bugs, and the studio asks you to implement TDD.</p>
<div class="section" id="automatic-testing-to-find-errors">
<h2>14.6.1. Automatic Testing to Find Errors<a class="headerlink" href="#automatic-testing-to-find-errors" title="Permalink to this headline">¶</a></h2>
<p>Let's begin with the following, simple code:</p>
<div class="highlight-js notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">checkFive</span><span class="p">(</span><span class="nx">num</span><span class="p">){</span>
   <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">num</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">){</span>
      <span class="nx">result</span> <span class="o">=</span> <span class="nx">num</span> <span class="o">+</span> <span class="s2">&quot; is less than 5.&quot;</span><span class="p">;</span>
   <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">num</span> <span class="o">===</span> <span class="mi">5</span><span class="p">){</span>
      <span class="nx">result</span> <span class="o">=</span> <span class="nx">num</span> <span class="o">+</span> <span class="s2">&quot; is equal to 5.&quot;</span><span class="p">;</span>
   <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">result</span> <span class="o">=</span> <span class="nx">num</span> <span class="o">+</span> <span class="s2">&quot; is greater than 5.&quot;</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p class="repl-link"><a class="reference external" href="https://repl.it/&#64;launchcode/UnitTestingExercises02" target="_blank">repl.it<i class="fas fa-external-link-alt" aria-hidden="true"></i></a></p>
<p>The function checks to see if a number is greater than, less than, or equal to
5. We do not really need a function to do this, but it provides good practice
for writing test cases.</p>
<p>Note that the repl.it contains three files:</p>
<ol class="loweralpha simple">
<li><code class="docutils literal notranslate"><span class="pre">checkFive.js</span></code>, which holds the code for the function,</li>
<li><code class="docutils literal notranslate"><span class="pre">checkFive.spec.js</span></code>, which will hold the testing code,</li>
<li><code class="docutils literal notranslate"><span class="pre">index.js</span></code> which holds special code to make Jasmine work.</li>
</ol>
<div class="admonition">
<p class="first admonition-title"><i class="fas fa-exclamation-triangle" aria-hidden="true"></i>Warning</p>
<p class="last">Do NOT change the code in <code class="docutils literal notranslate"><span class="pre">index.js</span></code>. Messing with this file will disrupt
the automatic testing.</p>
</div>
<ol class="arabic" id="export-syntax">
<li><p class="first">We need to add a few lines to <code class="docutils literal notranslate"><span class="pre">checkFive.js</span></code> and <code class="docutils literal notranslate"><span class="pre">checkFive.spec.js</span></code> to
get them to talk to each other.</p>
<ol class="loweralpha simple">
<li><code class="docutils literal notranslate"><span class="pre">checkFive.spec.js</span></code> needs to access <code class="docutils literal notranslate"><span class="pre">checkFive.js</span></code>, and we also need
to import the <code class="docutils literal notranslate"><span class="pre">assert</span></code> testing function. Add two <code class="docutils literal notranslate"><span class="pre">require</span></code> statements
to accomplish this (review <a class="reference internal" href="unit-testing-in-action.html#set-up"><span class="std std-ref">Unit Testing in Action</span></a> if
needed).</li>
<li>Make the <code class="docutils literal notranslate"><span class="pre">checkFive</span></code> function available to the spec file, by using
<code class="docutils literal notranslate"><span class="pre">module.exports</span></code> (review <a class="reference internal" href="unit-testing-in-action.html#export-set-up"><span class="std std-ref">Unit Testing in Action</span></a> if
needed).</li>
</ol>
</li>
<li><p class="first">Set up your first test for the <code class="docutils literal notranslate"><span class="pre">checkFive</span></code> function. In the
<code class="docutils literal notranslate"><span class="pre">checkFive.spec.js</span></code> file, add a <code class="docutils literal notranslate"><span class="pre">describe</span></code> function with one <code class="docutils literal notranslate"><span class="pre">it</span></code>
clause:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">checkFive</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../checkFive.js&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;assert&#39;</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;checkFive&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>

   <span class="nx">it</span><span class="p">(</span><span class="s2">&quot;Descriptive feedback...&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="c1">//code here...</span>
   <span class="p">});</span>

<span class="p">});</span>
</pre></div>
</div>
</li>
<li><p class="first">Now write a test to see if <code class="docutils literal notranslate"><span class="pre">checkFive</span></code> produces the correct output when
passed a number <em>less than 5</em>.</p>
<ol class="loweralpha">
<li><p class="first">First, replace <code class="docutils literal notranslate"><span class="pre">Descriptive</span> <span class="pre">feedback...</span></code> with a DETAILED message. This
is the text that the user will see if the test <em>fails</em>. Do NOT skimp on
this. Refer back to the <a class="reference internal" href="hello-jasmine.html#feedback"><span class="std std-ref">Specifications and Assertions</span></a>
section to review best practices.</p>
</li>
<li><p class="first">Define the variable <code class="docutils literal notranslate"><span class="pre">output</span></code>, and initialize it by passing a value of
<code class="docutils literal notranslate"><span class="pre">2</span></code> to <code class="docutils literal notranslate"><span class="pre">checkFive</span></code>.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">checkFive</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../checkFive.js&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;assert&#39;</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;checkFive&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>

   <span class="nx">it</span><span class="p">(</span><span class="s2">&quot;Descriptive feedback...&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="kd">let</span> <span class="nx">output</span> <span class="o">=</span> <span class="nx">checkFive</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
   <span class="p">});</span>

<span class="p">});</span>
</pre></div>
</div>
</li>
<li><p class="first">Now use the <code class="docutils literal notranslate"><span class="pre">assert</span></code> function to check the result:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">checkFive</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../checkFive.js&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;assert&#39;</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;checkFive&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>

   <span class="nx">it</span><span class="p">(</span><span class="s2">&quot;Descriptive feedback...&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="kd">let</span> <span class="nx">output</span> <span class="o">=</span> <span class="nx">checkFive</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">output</span><span class="p">,</span> <span class="s2">&quot;2 is less than 5.&quot;</span><span class="p">);</span>
   <span class="p">});</span>

<span class="p">});</span>
</pre></div>
</div>
</li>
<li><p class="first">Run the test script and examine the results. The test should pass and
produce output similar to:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Started
.

1 spec, 0 failures
Finished in 0.006 seconds
</pre></div>
</div>
</li>
<li><p class="first">Now change line 3 in <code class="docutils literal notranslate"><span class="pre">checkFive.js</span></code> to <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(num</span> <span class="pre">&gt;</span> <span class="pre">5)</span></code> and rerun
the test. The output should look similar to :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Started
F

Failures:
1) checkFive should return &#39;num&#39; is less than 5 when passed a number smaller than 5.
Message:
   AssertionError [ERR_ASSERTION]: Input A expected to strictly equal input B:
   + expected - actual

   - &#39;2 is greater than 5.&#39;
   + &#39;2 is less than 5.&#39;
</pre></div>
</div>
</li>
<li><p class="first">Change line 3 back.</p>
</li>
</ol>
<div class="admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p class="last">We do NOT need to check every possible value that is less than 5. Testing a single
example is sufficient to check that part of the function.</p>
</div>
</li>
<li><p class="first">Add two more <code class="docutils literal notranslate"><span class="pre">it</span></code> clauses inside <code class="docutils literal notranslate"><span class="pre">describe</span></code>---one to test what happens
when <code class="docutils literal notranslate"><span class="pre">checkFive</span></code> is passed a value greater than 5, and the other to test
when the value equals 5.</p>
</li>
</ol>
</div>
<div class="section" id="try-one-on-your-own">
<h2>14.6.2. Try One on Your Own<a class="headerlink" href="#try-one-on-your-own" title="Permalink to this headline">¶</a></h2>
<p>Time for Rock, Paper, Scissors! The function below takes the choices
(<code class="docutils literal notranslate"><span class="pre">'rock'</span></code>, <code class="docutils literal notranslate"><span class="pre">'paper'</span></code>, or <code class="docutils literal notranslate"><span class="pre">'scissors'</span></code>) of two players as its parameters.
It then decides which player won the match and returns a string.</p>
<div class="highlight-js notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">whoWon</span><span class="p">(</span><span class="nx">player1</span><span class="p">,</span><span class="nx">player2</span><span class="p">){</span>

   <span class="k">if</span> <span class="p">(</span><span class="nx">player1</span> <span class="o">===</span> <span class="nx">player2</span><span class="p">){</span>
      <span class="k">return</span> <span class="s1">&#39;TIE!&#39;</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="k">if</span> <span class="p">(</span><span class="nx">player1</span> <span class="o">===</span> <span class="s1">&#39;rock&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">player2</span> <span class="o">===</span> <span class="s1">&#39;paper&#39;</span><span class="p">){</span>
      <span class="k">return</span> <span class="s1">&#39;Player 2 wins!&#39;</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="k">if</span> <span class="p">(</span><span class="nx">player1</span> <span class="o">===</span> <span class="s1">&#39;paper&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">player2</span> <span class="o">===</span> <span class="s1">&#39;scissors&#39;</span><span class="p">){</span>
      <span class="k">return</span> <span class="s1">&#39;Player 2 wins!&#39;</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="k">if</span> <span class="p">(</span><span class="nx">player1</span> <span class="o">===</span> <span class="s1">&#39;scissors&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">player2</span> <span class="o">===</span> <span class="s1">&#39;rock &#39;</span><span class="p">){</span>
      <span class="k">return</span> <span class="s1">&#39;Player 2 wins!&#39;</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="k">return</span> <span class="s1">&#39;Player 1 wins!&#39;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p class="repl-link"><a class="reference external" href="https://repl.it/&#64;launchcode/UnitTestingExercises03" target="_blank">repl.it<i class="fas fa-external-link-alt" aria-hidden="true"></i></a></p>
<ol class="arabic simple">
<li>Set up the <code class="docutils literal notranslate"><span class="pre">RPS.js</span></code> and <code class="docutils literal notranslate"><span class="pre">RPS.spec.js</span></code> files to talk to each other. If
you need to review how to do this, re-read the
<a class="reference internal" href="#export-syntax"><span class="std std-ref">previous exercise</span></a>, or check
<a class="reference internal" href="hello-jasmine.html#hello-js"><span class="std std-ref">Hello Jasmine</span></a>.</li>
<li>Write a test in <code class="docutils literal notranslate"><span class="pre">RPS.spec.js</span></code> to check if <code class="docutils literal notranslate"><span class="pre">whoWon</span></code> behaves correctly
when the players tie (both choose the same option). Click &quot;Run&quot; and examine
the output. SPOILER ALERT: The code for checking ties is correct in
<code class="docutils literal notranslate"><span class="pre">whoWon</span></code>, so the test should pass. If it does not, modify your <code class="docutils literal notranslate"><span class="pre">it</span></code>
statement.</li>
<li>Write tests (one at a time) for each of the remaining cases. Run the tests
after each addition, and modify the code as needed. There is one mistake in
<code class="docutils literal notranslate"><span class="pre">whoWon</span></code>. You might spot it on your own, but try to use automated
testing to identify and fix it.</li>
</ol>
</div>
<div class="section" id="bonus-mission">
<h2>14.6.3. Bonus Mission<a class="headerlink" href="#bonus-mission" title="Permalink to this headline">¶</a></h2>
<p>What if something OTHER than <code class="docutils literal notranslate"><span class="pre">'rock'</span></code>, <code class="docutils literal notranslate"><span class="pre">'paper'</span></code>, or <code class="docutils literal notranslate"><span class="pre">'scissors'</span></code> is
passed into the <code class="docutils literal notranslate"><span class="pre">whoWon</span></code> function? Modify the code to deal with the
possibility.</p>
<p>Don't forget to add another <code class="docutils literal notranslate"><span class="pre">it</span></code> clause in <code class="docutils literal notranslate"><span class="pre">RPS.spec.js</span></code> to test for this
case.</p>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="tdd-example.html"><span aria-hidden="true">&larr;</span> 14.5. TDD in Action</a></li>
        
        
        <li class="next"><a href="studio.html">14.7. Studio: Unit Testing <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>